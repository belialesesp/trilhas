<div ng-controller="EixoFormularioController as vm">

	<div class="content-header">
		<h5>Trilhas <em class="fa fa-angle-right"></em> Eixos <em class="fa fa-angle-right"></em> Formulário <small class="badge badge-secondary">{{vm.eixo.id ? vm.eixo.id : 'novo'}}</small></h5>
		<div class="line"></div>
	</div>

	<form dirty-tracking name="form" novalidate ng-submit="vm.salvar(form)">

		<div id="server-errors" class="alert alert-danger" ng-if="form.serverErrors && form.$submitted">
			<ul>
				<li ng-repeat="serverError in form.serverErrors">
					<strong>{{serverError.key}}:</strong> {{serverError.message}}
				</li>
			</ul>
		</div>

		<fieldset class="edit-form">
			<div class="row">
				<div class="col-md-2 col-sm-12">
					<div class="row">
						<div class="col-12">
							<div class="form-group text-center">
								<label>Imagem: <span class="small">(80x80)</span></label><br />
								<img ng-src="data:image/jpeg;base64,{{vm.eixo.imagem}}" name="imagemSelecionada" ng-if="vm.eixo.imagem" />
								<img src="data:image/jpeg;base64,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" ng-if="!vm.eixo.imagem" />
								<br />
								<br />
								<span class="btn btn-link btn-file btn-sm">
									Alterar<input type="file" id="icone" class="form-control" accept="image/png, image/jpeg" data-toggle="modal" data-target="#modal-crop" />
								</span>
								<span class="btn btn-link btn-file btn-sm" ng-click="vm.limparImagem()">Limpar</span>
							</div>
						</div>
					</div>
				</div>
				<div class="col-md-10 col-sm-12">
					<div class="row">
						<div class="col-12">
							<div class="form-group">
								<label for="nome"><span class="asterisco">*</span>Eixo:</label>
								<input type="text" id="nome" name="nome" class="form-control" required autocomplete="off" autofocus capitalize
									   ng-class="{'is-invalid': form.nome.$invalid && (form.nome.$dirty || form.$submitted)}" ng-model="vm.eixo.nome" />
								<div ng-messages="form.nome.$error" role="alert" ng-if="form.nome.$dirty || form.$submitted">
									<div ng-message="required" class="invalid-feedback d-block">Campo obrigatório</div>
								</div>
							</div>
							<div class="form-group">
								<label for="descricao">Descrição:</label>
								<textarea id="descricao" name="descricao" class="form-control" rows="6" capitalize
										  ng-class="{'is-invalid': form.descricao.$invalid && (form.descricao.$dirty || form.$submitted)}" ng-model="vm.eixo.descricao" />
							</div>
						</div>
					</div>
				</div>
			</div>
		</fieldset>

		<fieldset class="actions-form">
			<div class="row">
				<div class="left-buttons col-md-6 col-sm-12">
					<a href="" class="btn btn-secondary" back-button><i class="fas fa-arrow-alt-circle-left"></i> Voltar</a>
				</div>
				<div class="right-buttons col-md-6 col-sm-12">
					<button type="button" class="btn btn-danger" data-toggle="modal" data-target="#confirm-dialog" ng-if="vm.eixo.id"><i class="fa fa-trash"></i> Excluir</button>
					<!--<input type="submit" class="btn btn-success" value="Salvar e Novo" ng-click="vm.salvarNovo()">-->
					<button type="submit" class="btn btn-primary" ng-click="vm.salvarVoltar()"><i class="fa fa-save"></i> Salvar</button>
				</div>
			</div>
		</fieldset>
	</form>

	<ng-include src="'/js/trilhas/eixo/eixo-formulario-modal-imagem.html'" onload="vm.initExtra()"></ng-include>

	<confirm-component confirmation-callback="vm.excluir"></confirm-component>
</div>